/*******************************************************************************
 *
 * File Name: H01indexedCSVdatabase.hpp
 * Author: Richard Bruce Baxter - Copyright (c) 2021 Baxter AI (baxterai.com)
 * License: MIT License
 * Project: H01LocalConnectome
 * Requirements: BAI SHARED C++ library, Eigen 3 C++ library
 * Compilation: ./compileH01indexedCSVdatabase.sh (enable INDEXED_CSV_DATABASE_VISUALISE_LOCAL_CONNECTOME/INDEXED_CSV_DATABASE_CREATE/INDEXED_CSV_DATABASE_QUERY)
 * Usage: ./H01indexedCSVdatabase.exe
 * Description: H01 indexed CSV database (global defs)
 * Comments:
 * /
 *******************************************************************************/

#include "SHAREDglobalDefs.hpp"


//compilation modes:
#define INDEXED_CSV_DATABASE_VISUALISE_LOCAL_CONNECTOME	//mode 1 (visualises datasets)	//aka LOCAL_CONNECTOME_CSV_DATASET_VISUALISE
//#define INDEXED_CSV_DATABASE_CREATE	//mode 2 (converts Avro Json C3 Synaptic connections database to indexed CSV database, indexed by pre/postsynaptic neuron ID)
//#define INDEXED_CSV_DATABASE_QUERY	//mode 3 (queries indexed CSV database, based on local connectome neuron id list)

#define LDR_REFERENCE_TYPE_SUBREFERENCE (1)
#define LDR_REFERENCE_TYPE_LINE (2)
#define LDR_REFERENCE_TYPE_TRIANGLE (3)
#define LDR_REFERENCE_TYPE_QUADRILATERAL (4)
		
#ifdef INDEXED_CSV_DATABASE_VISUALISE_LOCAL_CONNECTOME
	
	#define LOCAL_CONNECTOME_VISUALISATION_2D_SVG
	#define LOCAL_CONNECTOME_VISUALISATION_3D_LDR
	#ifdef LOCAL_CONNECTOME_VISUALISATION_3D_LDR
		#define LOCAL_CONNECTOME_VISUALISATION_3D
	#endif
	#define LOCAL_CONNECTOME_VISUALISATION_LAYERS
	#ifdef LOCAL_CONNECTOME_VISUALISATION_LAYERS
		#define INDEXED_CSV_DATABASE_CALCULATE_NEURON_LAYERS
	#endif
	
	#ifdef INDEXED_CSV_DATABASE_CALCULATE_NEURON_LAYERS
		#define CORTICAL_LAYER_KEYPOINT_UNAVAILABLE_VALUE 0
		#define CORTICAL_LAYER_NUMBER_OF_LAYERS (7)	//L2toL1 (1), L3toL2 (2), L4toL3 (3), L5toL4 (4), L6toL5 (5), WMtoL6 (6), WM (7)
		#define CORTICAL_LAYER_BOUNDARY_KEYPOINT_TABLE_FILE_NAME "corticalLayersBoundaryKeypoints.csv"	//this dataset has already had its X/Y coordindates calibrated for visualisation (as it was derived from connections_I/E.svg visualisation; see working/calibration/connections_IE-FlattenBezier.svg)
	#endif
	
	#define LOCAL_CONNECTOME_VISUALISATION_SVG_PART_IMPORT_FILENAME_PREPEND "connections_IE_part"
	#define LOCAL_CONNECTOME_VISUALISATION_SVG_FILENAME_PREPEND "connections_IE"
	#ifdef LOCAL_CONNECTOME_VISUALISATION_3D
		#define LOCAL_CONNECTOME_VISUALISATION_LDR_PART_IMPORT_FILENAME_PREPEND "connections_IE_part"
		#define LOCAL_CONNECTOME_VISUALISATION_LDR_FILENAME_PREPEND "connections_IE"
	#endif
	#define LOCAL_CONNECTOME_VISUALISATION_SVG_FILENAME_APPEND_COLOURSET_DIRECTION "-Direction"
	#define LOCAL_CONNECTOME_VISUALISATION_SVG_FILENAME_APPEND_COLOURSET_DIRECTION_FLOW "-DirectionFlow"
	#define LOCAL_CONNECTOME_VISUALISATION_SVG_FILENAME_APPEND_COLOURSET_LAYERED_DIRECTION_FLOW "-LayeredDirectionFlow"
	#define LOCAL_CONNECTOME_VISUALISATION_SVG_FILENAME_APPEND_COLOURSET_LAYERED_DIRECTION "-LayeredDirection"
	
		
	#define LOCAL_CONNECTOME_DATASET_NEURONS_FILENAME "localConnectomeNeurons.csv"
	#define LOCAL_CONNECTOME_DATASET_CONNECTIONS_FILENAME_TYPES_DERIVED_FROM_EM_IMAGES "localConnectomeConnections-typesFromEMimages.csv"
	#define LOCAL_CONNECTOME_DATASET_CONNECTIONS_FILENAME_TYPES_DERIVED_FROM_PRESYNAPTIC_NEURONS "localConnectomeConnections-typesFromPresynapticNeurons.csv"

	
	#define LOCAL_CONNECTOME_DATASET_NEURONS_FIELD_INDEX_NEURON_ID (0)	//C3 database neuron_id
	#define LOCAL_CONNECTOME_DATASET_NEURONS_FIELD_INDEX_X (1)	//C3 database neuron centroid coordinates
	#define LOCAL_CONNECTOME_DATASET_NEURONS_FIELD_INDEX_Y (2)	//C3 database neuron centroid coordinates
	#define LOCAL_CONNECTOME_DATASET_NEURONS_FIELD_INDEX_Z (3)	//C3 database neuron centroid coordinates
	#define LOCAL_CONNECTOME_DATASET_NEURONS_FIELD_INDEX_TYPE (4)	//C3 database neuron classification (PYRAMIDAL, INTERNEURON)
	#define LOCAL_CONNECTOME_DATASET_NEURONS_FIELD_INDEX_EXCITATION_TYPE (5)	//excitatory (1), inhibitory (0)	//derived from neuron type
	#ifdef LOCAL_CONNECTOME_VISUALISATION_LAYERS
		#define LOCAL_CONNECTOME_DATASET_NEURONS_FIELD_INDEX_ARTIFICIAL_LAYER (6)	//dynamically pregenerated once and saved for efficiency
	#endif
	#define LOCAL_CONNECTOME_DATASET_NEURONS_FIELD_INDEX_EXCITATION_TYPE_EXCITATORY (1)
	#define LOCAL_CONNECTOME_DATASET_NEURONS_FIELD_INDEX_EXCITATION_TYPE_INHIBITORY (0)
	#define LOCAL_CONNECTOME_DATASET_NEURONS_FIELD_INDEX_EXCITATION_TYPE_UNKNOWN (-1)
	#define LOCAL_CONNECTOME_VISUALISATION_NEURONS_COLOURSET_REFERENCE_EXCITATION_TYPE_EXCITATORY "exciteNeuron"
	#define LOCAL_CONNECTOME_VISUALISATION_NEURONS_COLOURSET_REFERENCE_EXCITATION_TYPE_INHIBITORY "inhibitNeuron"
	#define LOCAL_CONNECTOME_VISUALISATION_NEURONS_COLOURSET_REFERENCE_EXCITATION_TYPE_UNKNOWN "unknownNeuron"
	#define LOCAL_CONNECTOME_VISUALISATION_NEURONS_COLOURSET_REFERENCE_APPEND "Color"
	#ifdef LOCAL_CONNECTOME_VISUALISATION_LAYERS
		#define LOCAL_CONNECTOME_VISUALISATION_NEURONS_COLOURSET_REFERENCE_LAYER "Layer"	//LayerX
	#endif
	#define LOCAL_CONNECTOME_VISUALISATION_NEURONS_SVG_HEADER_TEXT "     <!-- neurons with excitatory/inhibitory connections -->"
	#ifdef LOCAL_CONNECTOME_VISUALISATION_3D
		#define LOCAL_CONNECTOME_VISUALISATION_NEURONS_COLOUR_EXCITATION_TYPE_EXCITATORY (SHARED_COLOUR_YELLOW)	//OLD: SHARED_COLOUR_GREEN
		#define LOCAL_CONNECTOME_VISUALISATION_NEURONS_COLOUR_EXCITATION_TYPE_INHIBITORY (SHARED_COLOUR_MAGENTA)	//OLD: SHARED_COLOUR_RED
		#define LOCAL_CONNECTOME_VISUALISATION_NEURONS_COLOUR_EXCITATION_TYPE_UNKNOWN (SHARED_COLOUR_WHITE)
		#define LOCAL_CONNECTOME_VISUALISATION_NEURONS_LDR_REFERENCE_TYPE (LDR_REFERENCE_TYPE_SUBREFERENCE)
		#define LOCAL_CONNECTOME_VISUALISATION_NEURONS_LDR_MODEL_TRANSFORMATION_MATRIX "1.0 0.0 0.0 0.0 1.0 0.0 0.0 0.0 1.0"
		#define LOCAL_CONNECTOME_VISUALISATION_NEURONS_LDR_MODEL_FILE_NAME "4-4CUBE.DAT"	//4-4SPHE.DAT
		#define LOCAL_CONNECTOME_VISUALISATION_NEURONS_LDR_HEADER_TEXT "0 postSynapticNeuronLDRcontent"
		
		#define LOCAL_CONNECTOME_VISUALISATION_NEURONS_COLOUR_EXCITENEURON_LAYER1 (SHARED_COLOUR_BLUE)
		#define LOCAL_CONNECTOME_VISUALISATION_NEURONS_COLOUR_EXCITENEURON_LAYER2 (SHARED_COLOUR_RED)
		#define LOCAL_CONNECTOME_VISUALISATION_NEURONS_COLOUR_EXCITENEURON_LAYER3 (SHARED_COLOUR_YELLOW)
		#define LOCAL_CONNECTOME_VISUALISATION_NEURONS_COLOUR_EXCITENEURON_LAYER4 (SHARED_COLOUR_CYAN)
		#define LOCAL_CONNECTOME_VISUALISATION_NEURONS_COLOUR_EXCITENEURON_LAYER5 (SHARED_COLOUR_MAGENTA)
		#define LOCAL_CONNECTOME_VISUALISATION_NEURONS_COLOUR_EXCITENEURON_LAYER6 (SHARED_COLOUR_ORANGE)
		#define LOCAL_CONNECTOME_VISUALISATION_NEURONS_COLOUR_EXCITENEURON_LAYER7 (SHARED_COLOUR_GREEN)
		#define LOCAL_CONNECTOME_VISUALISATION_NEURONS_COLOUR_INHIBITNEURON_LAYER1 (SHARED_COLOUR_DARKBLUE)
		#define LOCAL_CONNECTOME_VISUALISATION_NEURONS_COLOUR_INHIBITNEURON_LAYER2 (SHARED_COLOUR_DARKRED)
		#define LOCAL_CONNECTOME_VISUALISATION_NEURONS_COLOUR_INHIBITNEURON_LAYER3 (SHARED_COLOUR_DARKYELLOW)
		#define LOCAL_CONNECTOME_VISUALISATION_NEURONS_COLOUR_INHIBITNEURON_LAYER4 (SHARED_COLOUR_AQUA)
		#define LOCAL_CONNECTOME_VISUALISATION_NEURONS_COLOUR_INHIBITNEURON_LAYER5 (SHARED_COLOUR_PURPLE)
		#define LOCAL_CONNECTOME_VISUALISATION_NEURONS_COLOUR_INHIBITNEURON_LAYER6 (SHARED_COLOUR_BROWN)
		#define LOCAL_CONNECTOME_VISUALISATION_NEURONS_COLOUR_INHIBITNEURON_LAYER7 (SHARED_COLOUR_DARKGREEN)
		/*
		#define LOCAL_CONNECTOME_VISUALISATION_NEURONS_COLOUR_UNKNOWNNEURON_LAYER1 (SHARED_COLOUR_WHITE)
		#define LOCAL_CONNECTOME_VISUALISATION_NEURONS_COLOUR_UNKNOWNNEURON_LAYER2 (SHARED_COLOUR_WHITE)
		#define LOCAL_CONNECTOME_VISUALISATION_NEURONS_COLOUR_UNKNOWNNEURON_LAYER3 (SHARED_COLOUR_WHITE)
		#define LOCAL_CONNECTOME_VISUALISATION_NEURONS_COLOUR_UNKNOWNNEURON_LAYER4 (SHARED_COLOUR_WHITE)
		#define LOCAL_CONNECTOME_VISUALISATION_NEURONS_COLOUR_UNKNOWNNEURON_LAYER5 (SHARED_COLOUR_WHITE)
		#define LOCAL_CONNECTOME_VISUALISATION_NEURONS_COLOUR_UNKNOWNNEURON_LAYER6 (SHARED_COLOUR_WHITE
		#define LOCAL_CONNECTOME_VISUALISATION_NEURONS_COLOUR_UNKNOWNNEURON_LAYER7 (SHARED_COLOUR_WHITE)
		*/
	#endif
		
	#define LOCAL_CONNECTOME_DATASET_CONNECTIONS_FIELD_INDEX_PRE_ID (0)	//C3 database neuron_id
	#define LOCAL_CONNECTOME_DATASET_CONNECTIONS_FIELD_INDEX_PRE_X (1)	//C3 database neuron centroid coordinates
	#define LOCAL_CONNECTOME_DATASET_CONNECTIONS_FIELD_INDEX_PRE_Y (2)	//C3 database neuron centroid coordinates
	#define LOCAL_CONNECTOME_DATASET_CONNECTIONS_FIELD_INDEX_PRE_Z (3)	//C3 database neuron centroid coordinates
	#define LOCAL_CONNECTOME_DATASET_CONNECTIONS_FIELD_INDEX_PRE_TYPE (4)	//C3 database neuron classification (PYRAMIDAL, INTERNEURON)
	#define LOCAL_CONNECTOME_DATASET_CONNECTIONS_FIELD_INDEX_POST_ID (5)	//C3 database neuron_id
	#define LOCAL_CONNECTOME_DATASET_CONNECTIONS_FIELD_INDEX_POST_X (6)	//C3 database neuron centroid coordinates
	#define LOCAL_CONNECTOME_DATASET_CONNECTIONS_FIELD_INDEX_POST_Y (7)	//C3 database neuron centroid coordinates
	#define LOCAL_CONNECTOME_DATASET_CONNECTIONS_FIELD_INDEX_POST_Z (8)	//C3 database neuron centroid coordinates
	#define LOCAL_CONNECTOME_DATASET_CONNECTIONS_FIELD_INDEX_POST_TYPE (9)	//C3 database neuron classification (PYRAMIDAL, INTERNEURON)
	#define LOCAL_CONNECTOME_DATASET_CONNECTIONS_FIELD_INDEX_POST_CLASS (10)	//C3 database synapse connection site (DENDRITE, SOMA, UNKNOWN) //not used
	#define LOCAL_CONNECTOME_DATASET_CONNECTIONS_FIELD_INDEX_SYN_NUM (11)	//number of connections
	#define LOCAL_CONNECTOME_DATASET_CONNECTIONS_FIELD_INDEX_EXCITATION_TYPE (12)	//excitatory (1), inhibitory (0)	//derived from neuron type [connectionTypesDerivedFromEMimages] or C3 connections database [connectionTypesDerivedFromPresynapticNeurons]
	#ifdef LOCAL_CONNECTOME_VISUALISATION_LAYERS
		#define LOCAL_CONNECTOME_DATASET_CONNECTIONS_FIELD_INDEX_PRE_ARTIFICIAL_LAYER (13)	//dynamically pregenerated once and saved for efficiency
		#define LOCAL_CONNECTOME_DATASET_CONNECTIONS_FIELD_INDEX_POST_ARTIFICIAL_LAYER (14)	//dynamically pregenerated once and saved for efficiency
	#endif
	#define LOCAL_CONNECTOME_DATASET_CONNECTIONS_FIELD_INDEX_EXCITATION_TYPE_EXCITATORY (1)
	#define LOCAL_CONNECTOME_DATASET_CONNECTIONS_FIELD_INDEX_EXCITATION_TYPE_INHIBITORY (0)
	#define LOCAL_CONNECTOME_VISUALISATION_CONNECTIONS_COLOURSET_REFERENCE_EXCITATION_TYPE_EXCITATORY "exciteConnection"
	#define LOCAL_CONNECTOME_VISUALISATION_CONNECTIONS_COLOURSET_REFERENCE_EXCITATION_TYPE_INHIBITORY "inhibitConnection"
	#ifdef LOCAL_CONNECTOME_VISUALISATION_LAYERS
		#define LOCAL_CONNECTOME_VISUALISATION_CONNECTIONS_COLOURSET_REFERENCE_LAYER "Layer"	//LayerX
	#endif
	#define LOCAL_CONNECTOME_DATASET_CONNECTIONS_FIELD_INDEX_RADIALGRADIENT_TYPE_POSITIVE (0)    //radial gradient: SVG pre/post synaptic X coordinates drawn left to right
	#define LOCAL_CONNECTOME_DATASET_CONNECTIONS_FIELD_INDEX_RADIALGRADIENT_TYPE_NEGATIVE (1)    //radial gradient: SVG pre/post synaptic X coordinates drawn right to left (requires colour gradient switch)
	#define LOCAL_CONNECTOME_VISUALISATION_CONNECTIONS_COLOURSET_REFERENCE_RADIALGRADIENT_TYPE_POSITIVE "RadialGradient2"
	#define LOCAL_CONNECTOME_VISUALISATION_CONNECTIONS_COLOURSET_REFERENCE_RADIALGRADIENT_TYPE_NEGATIVE "RadialGradient1"
	#define LOCAL_CONNECTOME_DATASET_CONNECTIONS_FIELD_INDEX_FLOW_TYPE_POSITIVE (1)    //flow: from layer 1->7
	#define LOCAL_CONNECTOME_DATASET_CONNECTIONS_FIELD_INDEX_FLOW_TYPE_NEGATIVE (0)    //flow: from layer 7->1
	#define LOCAL_CONNECTOME_VISUALISATION_CONNECTIONS_COLOURSET_REFERENCE_FLOW_TYPE_POSITIVE "FlowDirection1"
	#define LOCAL_CONNECTOME_VISUALISATION_CONNECTIONS_COLOURSET_REFERENCE_FLOW_TYPE_NEGATIVE "FlowDirection2"  
	#define LOCAL_CONNECTOME_VISUALISATION_CONNECTIONS_SVG_HEADER_TEXT "   	<!-- excitatory/inhibitory connections -->"
	#ifdef LOCAL_CONNECTOME_VISUALISATION_3D
		#define LOCAL_CONNECTOME_VISUALISATION_CONNECTIONS_COLOUR_EXCITATION_TYPE_EXCITATORY (SHARED_COLOUR_GREEN)
		#define LOCAL_CONNECTOME_VISUALISATION_CONNECTIONS_COLOUR_EXCITATION_TYPE_INHIBITORY (SHARED_COLOUR_RED)
		#define LOCAL_CONNECTOME_VISUALISATION_CONNECTIONS_LDR_REFERENCE_TYPE (LDR_REFERENCE_TYPE_LINE)
		#define LOCAL_CONNECTOME_VISUALISATION_CONNECTIONS_COLOUR_EXCITATION_TYPE_EXCITATORY_FLOW_TYPE_POSITIVE (SHARED_COLOUR_GREEN)
		#define LOCAL_CONNECTOME_VISUALISATION_CONNECTIONS_COLOUR_EXCITATION_TYPE_INHIBITORY_FLOW_TYPE_POSITIVE (SHARED_COLOUR_RED)
		#define LOCAL_CONNECTOME_VISUALISATION_CONNECTIONS_COLOUR_EXCITATION_TYPE_EXCITATORY_FLOW_TYPE_NEGATIVE (SHARED_COLOUR_BLUE)
		#define LOCAL_CONNECTOME_VISUALISATION_CONNECTIONS_COLOUR_EXCITATION_TYPE_INHIBITORY_FLOW_TYPE_NEGATIVE (SHARED_COLOUR_MAGENTA)
		#define LOCAL_CONNECTOME_VISUALISATION_CONNECTIONS_LDR_HEADER_TEXT "0 connectionLDRcontent"
	#endif 
	#define LOCAL_CONNECTOME_VISUALISATION_CONNECTIONS_COLOURSET_REFERENCE_APPEND ""
	
	#define LOCAL_CONNECTOME_VISUALISATION_FILENAME_COLOURSET_PREPEND ""	//_colourset
	
					
	#define LOCAL_CONNECTOME_VISUALISATION_SVG_FILENAME_DIRECTION "connections_IE"
	#define LOCAL_CONNECTOME_VISUALISATION_SVG_FILENAME_DIRECTION_FLOW "connections_IE_flow"
	#define LOCAL_CONNECTOME_VISUALISATION_SVG_FILENAME_DIRECTION_NUMBER_COLOURSETS (1)
	#define LOCAL_CONNECTOME_VISUALISATION_SVG_FILENAME_DIRECTION_FLOW_NUMBER_COLOURSETS (3)
	#ifdef LOCAL_CONNECTOME_VISUALISATION_LAYERS
		#define LOCAL_CONNECTOME_VISUALISATION_SVG_FILENAME_LAYERED_DIRECTION "connections_IE_layered"
		#define LOCAL_CONNECTOME_VISUALISATION_SVG_FILENAME_LAYERED_DIRECTION_FLOW "connections_IE_layered_flow"
		#define LOCAL_CONNECTOME_VISUALISATION_SVG_FILENAME_LAYERED_DIRECTION_NUMER_COLOURSETS (2)
		#define LOCAL_CONNECTOME_VISUALISATION_SVG_FILENAME_LAYERED_DIRECTION_FLOW_NUMBER_COLOURSETS (2)
		#define LOCAL_CONNECTOME_VISUALISATION_SVG_FILENAME_LAYERED_SPECIFIC_LAYER "_L"
	#endif
	
	#define LOCAL_CONNECTOME_VISUALISATION_LDR_FILENAME_DIRECTION "connections_IE"
	#define LOCAL_CONNECTOME_VISUALISATION_LDR_FILENAME_DIRECTION_FLOW "connections_IE_flow"
	#define LOCAL_CONNECTOME_VISUALISATION_LDR_FILENAME_DIRECTION_NUMBER_COLOURSETS (1)
	#define LOCAL_CONNECTOME_VISUALISATION_LDR_FILENAME_DIRECTION_FLOW_NUMBER_COLOURSETS (1)
	#ifdef LOCAL_CONNECTOME_VISUALISATION_LAYERS
		#define LOCAL_CONNECTOME_VISUALISATION_LDR_FILENAME_LAYERED_DIRECTION "connections_IE_layered"
		#define LOCAL_CONNECTOME_VISUALISATION_LDR_FILENAME_LAYERED_DIRECTION_FLOW "connections_IE_layered_flow"
		#define LOCAL_CONNECTOME_VISUALISATION_LDR_FILENAME_LAYERED_DIRECTION_NUMER_COLOURSETS (2)
		#define LOCAL_CONNECTOME_VISUALISATION_LDR_FILENAME_LAYERED_DIRECTION_FLOW_NUMBER_COLOURSETS (1)
		#define LOCAL_CONNECTOME_VISUALISATION_LDR_FILENAME_LAYERED_SPECIFIC_LAYER "_L"
	#endif
		
	#define INDEXED_CSV_DATABASE_VISUALISE_LOCAL_CONNECTOME_USE_RELATIVE_FOLDER
	#ifdef INDEXED_CSV_DATABASE_VISUALISE_LOCAL_CONNECTOME_USE_RELATIVE_FOLDER
		#define LOCAL_CONNECTOME_FOLDER_BASE "../"	
	#else
		#define LOCAL_CONNECTOME_FOLDER_BASE "/media/user/large/source/h01Connectome/H01LocalConnectome/"	
	#endif
	#define LOCAL_CONNECTOME_DATASET_FOLDER "datasets/"
	#define LOCAL_CONNECTOME_VISUALISATION_FOLDER "visualisations/"
	#define LOCAL_CONNECTOME_VISUALISATION_FOLDER_CONNECTION_TYPES_DERIVED_FROM_PRESYNAPTIC_NEURONS "connectionTypesFromPresynapticNeurons/"
	#define LOCAL_CONNECTOME_VISUALISATION_FOLDER_CONNECTION_TYPES_DERIVED_FROM_EM_IMAGES "connectionTypesFromEMimages/"
	#define LOCAL_CONNECTOME_VISUALISATION_FOLDER_2D "2D/"
	#define LOCAL_CONNECTOME_VISUALISATION_FOLDER_3D "3D/"
	#define LOCAL_CONNECTOME_VISUALISATION_TEMPLATES_FOLDER "visualisations/templates"
	
	//calibration values extracted from dev/working/calibration/readme.txt - conversion from C3/CSV database to SVG/LDR visualisation:		
	#define LOCAL_CONNECTOME_VISUALISATION_CALIBRATION_FACTOR_X (0.00744)
	#define LOCAL_CONNECTOME_VISUALISATION_CALIBRATION_FACTOR_Y (0.00744)
	#define LOCAL_CONNECTOME_VISUALISATION_CALIBRATION_FACTOR_Z (0.00744)
	#define LOCAL_CONNECTOME_VISUALISATION_CALIBRATION_MIN_X (576)	
	#define LOCAL_CONNECTOME_VISUALISATION_CALIBRATION_MIN_Y (1176.48)
	#define LOCAL_CONNECTOME_VISUALISATION_CALIBRATION_MIN_Z (0)
	#define LOCAL_CONNECTOME_VISUALISATION_CALIBRATION_DOUBLE_PRECISION (5)	//based on connections_I/E.svg precision

	#define LOCAL_CONNECTOME_VISUALISATION_POSITIVE_FLOW_VECTOR_X (-(3471.18672 - 1925.47464))	//(L1->L6)
	#define LOCAL_CONNECTOME_VISUALISATION_POSITIVE_FLOW_VECTOR_Y (-(2069.5776 - 2837.22192))	//(L1->L6)	
#endif


#define AVRO_JSON_DATABASE_EXCITATORY_SYNAPSE_TYPE (2)
#define AVRO_JSON_DATABASE_INHIBITORY_SYNAPSE_TYPE (1)
#define AVRO_JSON_DATABASE_COORDINATES_RANGE_X (473357-107342)	//366015
#define AVRO_JSON_DATABASE_COORDINATES_RANGE_Y (282046-45528)	//236518
#define AVRO_JSON_DATABASE_COORDINATES_RANGE_Z (5248-0)	//5248
#define AVRO_JSON_DATABASE_COORDINATES_CALIBRATION_X (1.0)
#define AVRO_JSON_DATABASE_COORDINATES_CALIBRATION_Y (1.0)
#define AVRO_JSON_DATABASE_COORDINATES_CALIBRATION_Z (4.0)	//requires calibration	//can be used to enhance Z axis visibility
#define LDR_TYPE_LINE (2)

#ifdef INDEXED_CSV_DATABASE_CREATE
	#define DEBUG_CODE	//disable this DEBUG parameter to create the database (enabled for safety - prevents overwrite of indexed database; takes ~6 hours to regenerate)
	#define AVRO_JSON_DATABASE_FOLDER "/media/user/large/h01data/data/exported/json"
#endif

#ifdef INDEXED_CSV_DATABASE_QUERY
	#define INDEXED_CSV_DATABASE_QUERY_PERFORM_INCOMING_AXON_MAPPING
	#ifdef INDEXED_CSV_DATABASE_QUERY_PERFORM_INCOMING_AXON_MAPPING
		//input:
		#define INDEXED_CSV_DATABASE_QUERY_NEURON_LIST_DISTINCT_FILE_NAME "localConnectomeNeuronIDlistDistinct.csv"	//from in_body_cell_connection.csv - pre/postsynaptic distinct neuron ids		
		
		#define INDEXED_CSV_DATABASE_ALGORITHMS
		#define INDEXED_CSV_DATABASE_QUERY_PERFORM_INCOMING_AXON_MAPPING_MIN_NUM_POINTS_REQUIRED (20)	//(2)
		#define INDEXED_CSV_DATABASE_QUERY_PERFORM_INCOMING_AXON_MAPPING_NON_LOCAL_NEURONS_REQUIRED
		#define INDEXED_CSV_DATABASE_QUERY_PERFORM_INCOMING_AXON_MAPPING_EST_TYPE_BY_AVERAGE_SYNAPSE_TYPE
		#ifdef INDEXED_CSV_DATABASE_QUERY_PERFORM_INCOMING_AXON_MAPPING_EST_TYPE_BY_AVERAGE_SYNAPSE_TYPE
			#define INDEXED_CSV_DATABASE_QUERY_PERFORM_INCOMING_AXON_MAPPING_CONNECTION_TYPE_REQUIRED
			#ifdef INDEXED_CSV_DATABASE_QUERY_PERFORM_INCOMING_AXON_MAPPING_CONNECTION_TYPE_REQUIRED
				#define INDEXED_CSV_DATABASE_QUERY_PERFORM_INCOMING_AXON_MAPPING_CONNECTION_TYPE (AVRO_JSON_DATABASE_EXCITATORY_SYNAPSE_TYPE)	//excitatory
			#endif
		#endif
		
		#define INDEXED_CSV_DATABASE_QUERY_GET_LOCATION	//used to perform incoming long range axonal tract position/direction estimation (not just statistical comparison of distal vs local input)
		#define INDEXED_CSV_DATABASE_QUERY_OUTPUT	//performance speed by disabling primary output file write
		#ifdef INDEXED_CSV_DATABASE_QUERY_OUTPUT
			#define INDEXED_CSV_DATABASE_QUERY_OUTPUT_INCOMING_AXON_MAPPING
		#endif
		
		//#define INDEXED_CSV_DATABASE_QUERY_PERFORM_INCOMING_AXON_MAPPING_2D_POLY_REGRESSION
		#define INDEXED_CSV_DATABASE_QUERY_PERFORM_INCOMING_AXON_MAPPING_3D_LINEAR_REGRESSION
		#ifdef INDEXED_CSV_DATABASE_QUERY_PERFORM_INCOMING_AXON_MAPPING_3D_LINEAR_REGRESSION
			#define INDEXED_CSV_DATABASE_QUERY_OUTPUT_INCOMING_AXON_MAPPING_LDR
		#else
			#define INDEXED_CSV_DATABASE_QUERY_OUTPUT_INCOMING_AXON_MAPPING_CSV
		#endif
	
		#define INDEXED_CSV_DATABASE_QUERY_PERFORM_INCOMING_AXON_MAPPING_CONNECTION_TYPE_EXCITATORY_COLOUR (SHARED_COLOUR_GREEN)
		#define INDEXED_CSV_DATABASE_QUERY_PERFORM_INCOMING_AXON_MAPPING_CONNECTION_TYPE_INHIBITORY_COLOUR (SHARED_COLOUR_RED)
			
		//output:
		#ifdef INDEXED_CSV_DATABASE_QUERY_OUTPUT_INCOMING_AXON_MAPPING_LDR
			#define INDEXED_CSV_DATABASE_QUERY_NEURON_LIST_DISTINCT_CONNECTIONS_PRESYNAPTIC_FILE_NAME "localConnectomeIncomingAxonMapping.ldr"		
		#else
			#define INDEXED_CSV_DATABASE_QUERY_NEURON_LIST_DISTINCT_CONNECTIONS_PRESYNAPTIC_FILE_NAME "localConnectomeIncomingAxonMapping.csv"	//"localConnectomeNeuronIDdistinctListconnectionsPresynaptic.csv"	
		#endif
	#else
		#define INDEXED_CSV_DATABASE_QUERY_OUTPUT
		#ifdef INDEXED_CSV_DATABASE_QUERY_OUTPUT
			#define INDEXED_CSV_DATABASE_QUERY_OUTPUT_CONNECTIONS
		#endif
		//input:
		#define INDEXED_CSV_DATABASE_QUERY_NEURON_LIST1_FILE_NAME "localConnectomeNeuronIDlist1.csv"	//from in_body_cell_connection.csv - presynaptic neuron ids
		#define INDEXED_CSV_DATABASE_QUERY_NEURON_LIST2_FILE_NAME "localConnectomeNeuronIDlist2.csv"	//from in_body_cell_connection.csv - postsynaptic neuron ids
		//output:
		#define INDEXED_CSV_DATABASE_QUERY_NEURON_LIST1_CONNECTIONS_PRESYNAPTIC_FILE_NAME "localConnectomeNeuronIDlist1connectionsPresynaptic.csv"
		#define INDEXED_CSV_DATABASE_QUERY_NEURON_LIST1_CONNECTIONS_POSTSYNAPTIC_FILE_NAME "localConnectomeNeuronIDlist1connectionsPostsynaptic.csv"
		#define INDEXED_CSV_DATABASE_QUERY_NEURON_LIST2_CONNECTIONS_PRESYNAPTIC_FILE_NAME "localConnectomeNeuronIDlist2connectionsPresynaptic.csv"
		#define INDEXED_CSV_DATABASE_QUERY_NEURON_LIST2_CONNECTIONS_POSTSYNAPTIC_FILE_NAME "localConnectomeNeuronIDlist2connectionsPostsynaptic.csv"
	#endif
	
	#define INDEXED_CSV_DATABASE_QUERY_READ_WRITE_TO_CURRENT_FOLDER
	#ifndef INDEXED_CSV_DATABASE_QUERY_READ_WRITE_TO_CURRENT_FOLDER
		#define INDEXED_CSV_DATABASE_QUERY_INPUT_FOLDER "/media/user/large/source/h01Connectome/indexedSVGdatabase/H01indexedCSVdatabaseQueryOutput"
		#define INDEXED_CSV_DATABASE_QUERY_OUTPUT_FOLDER "/media/user/large/source/h01Connectome/indexedSVGdatabase/H01indexedCSVdatabaseQueryOutput"
	#endif
	#define INDEXED_CSV_DATABASE_QUERY_READ_WRITE_TO_FILE_OBJECT	//only use this if output folder exists on a different harddrive (not just partition) to indexed CSV database folder
	//max expected file/string size = indexed csv database query output size (neuron_id ~11 bytes + , + type ~1 byte = ~13 bytes) * avg num connections per neuron ID (~2000) * number of neuron IDs in list (~30000) = 13*2000*30000 = ~1GB of RAM if string	
#endif

#ifdef DEBUG_CODE
	#define INDEXED_CSV_DATABASE_FOLDER "/media/user/large/source/h01Connectome/indexedSVGdatabase/trial/indexedTrial"
#else
	#define INDEXED_CSV_DATABASE_FOLDER "/media/user/ssddata/indexed"
#endif

#define MAX_SSD_SIZE	//impose database size limit (50GB)
#ifdef MAX_SSD_SIZE
	#define EXECUTE_SUBSET
	#define AVRO_JSON_DATABASE_FILEINDEX_START (0)
	#define AVRO_JSON_DATABASE_FILEINDEX_END (165)
#else
	#define AVRO_JSON_DATABASE_FILEINDEX_START (0)
	#define AVRO_JSON_DATABASE_FILEINDEX_END (165)
	#define SAVE_RAW_JSON	//unrestricted by size 
#endif

#ifdef DEBUG_CODE
	#define AVRO_JSON_DATABASE_FILEINDEX_START (0)
	#define AVRO_JSON_DATABASE_FILEINDEX_END (0)
#endif
//#define DEBUG_RESTART
#ifdef DEBUG_RESTART
	#define AVRO_JSON_DATABASE_FILEINDEX_START (0)
	#define AVRO_JSON_DATABASE_FILEINDEX_END (0)
	#define DEBUG_RESTART_LINEINDEX_START (620306) //614124
#endif

#define AVRO_JSON_DATABASE_NEURON_ID_MAX_NUM_CHARACTERS (11)

#define INDEXED_CSV_DATABASE_STORE_MULTIPLE_PREPOSTSYNAPTIC_NEURONID_SYNAPSES_PER_FILE	//reduces number of files, requires further searching of files by application reading indexed csv database
#ifdef INDEXED_CSV_DATABASE_STORE_MULTIPLE_PREPOSTSYNAPTIC_NEURONID_SYNAPSES_PER_FILE
//eg 123/rawPre|PostSynapticNeuronID123.json|csv
#define INDEXED_CSV_DATABASE_NUMBER_LEVELS (2)
#define INDEXED_CSV_DATABASE_NUMBER_CHARACTERS_PER_FOLDER_LEVEL (3)
#define INDEXED_CSV_DATABASE_FILENAME_NEURONID_MAX_NUM_CHARACTERS (6)	//must be greater than (INDEXED_CSV_DATABASE_NUMBER_LEVELS-1)*INDEXED_CSV_DATABASE_NUMBER_CHARACTERS_PER_FOLDER_LEVEL
#else
//eg 1234/5678/rawPre|PostSynapticNeuronID123456789AB.json|csv
#define INDEXED_CSV_DATABASE_NUMBER_LEVELS (3)
#define INDEXED_CSV_DATABASE_NUMBER_CHARACTERS_PER_FOLDER_LEVEL (4)
#define INDEXED_CSV_DATABASE_FILENAME_NEURONID_MAX_NUM_CHARACTERS (AVRO_JSON_DATABASE_NEURON_ID_MAX_NUM_CHARACTERS)
#endif

#define JSON_FILE_EXTENSION ".json"
#define CSV_FILE_EXTENSION  ".csv"
#define LDR_FILE_EXTENSION  ".ldr"
#define SVG_FILE_EXTENSION  ".svg"
#define CSV_DELIMITER ","
#define CSV_DELIMITER_CHAR ','
#define LDR_DELIMITER " "

#define INDEXED_CSV_DATABASE_FILENAME_PREFIX_PRESYNAPTIC_CSV "csvPreSynapticNeuronID"
#define INDEXED_CSV_DATABASE_FILENAME_PREFIX_PRESYNAPTIC_RAW "rawPreSynapticNeuronID"
#define INDEXED_CSV_DATABASE_FILENAME_PREFIX_POSTSYNAPTIC_CSV "csvPostSynapticNeuronID"
#define INDEXED_CSV_DATABASE_FILENAME_PREFIX_POSTSYNAPTIC_RAW "rawPostSynapticNeuronID"

#define INDEXED_CSV_DATABASE_PRESYNAPTIC_SITE_NEURON_ID_FIELD_INDEX (0)
#define INDEXED_CSV_DATABASE_POSTSYNAPTIC_SITE_NEURON_ID_FIELD_INDEX (1)
#define INDEXED_CSV_DATABASE_PRESYNAPTIC_SITE_TYPE_FIELD_INDEX (2)
#define INDEXED_CSV_DATABASE_POSTSYNAPTIC_SITE_TYPE_FIELD_INDEX (3)
#define INDEXED_CSV_DATABASE_PRESYNAPTIC_SITE_CLASSLABEL_FIELD_INDEX (4)
#define INDEXED_CSV_DATABASE_POSTSYNAPTIC_SITE_CLASSLABEL_FIELD_INDEX (5)
#define INDEXED_CSV_DATABASE_PRESYNAPTIC_SITE_BASENEURON_ID_FIELD_INDEX (6)
#define INDEXED_CSV_DATABASE_POSTSYNAPTIC_SITE_BASENEURON_ID_FIELD_INDEX (7)
#define INDEXED_CSV_DATABASE_SYNAPSE_LOCATION_COORDINATE_X_FIELD_INDEX (8)
#define INDEXED_CSV_DATABASE_SYNAPSE_LOCATION_COORDINATE_Y_FIELD_INDEX (9)
#define INDEXED_CSV_DATABASE_SYNAPSE_LOCATION_COORDINATE_Z_FIELD_INDEX (10)
#define INDEXED_CSV_DATABASE_SYNAPSE_TYPE_FIELD_INDEX (11)
#define INDEXED_CSV_DATABASE_NUMBER_FIELDS (12)

#define CPP_STRING_FIND_RESULT_FAIL_VALUE2 int(CPP_STRING_FIND_RESULT_FAIL_VALUE)


